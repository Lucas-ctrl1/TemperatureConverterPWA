<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="https://c.s-microsoft.com/favicon.ico?v2" />
    <title>Temperature converter</title>
    
    <!-- CSS and Manifest -->
    <link rel="stylesheet" href="converter.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <h1>Temperature converter</h1>

    <form id="converter">
        <label for="input-temp">temperature</label>
        <input type="text" id="input-temp" name="input-temp" value="20" />
        <label for="input-unit">from</label>
        <select id="input-unit" name="input-unit">
            <option value="c" selected>Celsius</option>
            <option value="f">Fahrenheit</option>
            <option value="k">Kelvin</option>
        </select>
        <label for="output-unit">to</label>
        <select id="output-unit" name="output-unit">
            <option value="c">Celsius</option>
            <option value="f" selected>Fahrenheit</option>
            <option value="k">Kelvin</option>
        </select>
        <output name="output-temp" id="output-temp" for="input-temp input-unit output-unit">68 F</output>
    </form>

    <script src="converter.js"></script>
    <script>
    if('serviceWorker' in navigator) {
        navigator.serviceWorker.register('sw.js', { scope: './' });
    }
    </script>

    <!-- ADD THIS SCRIPT -->
    <script>
    let installPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
        console.log('ðŸŽ¯ BEFOREINSTALLPROMPT FIRED!');
        installPrompt = e;
        showInstallButton();
    });

    function showInstallButton() {
        const btn = document.createElement('button');
        btn.innerHTML = 'ðŸ“± INSTALL APP';
        btn.style.cssText = `
            position: fixed; bottom: 20px; right: 20px; 
            padding: 12px 20px; background: #2f3d58; color: white; 
            border: none; border-radius: 8px; cursor: pointer; 
            font-size: 14px; font-weight: bold; z-index: 10000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        `;
        btn.onclick = () => {
            if (!installPrompt) return;
            installPrompt.prompt();
            installPrompt.userChoice.then(choice => {
                console.log('User choice:', choice.outcome);
                installPrompt = null;
                btn.remove();
            });
        };
        document.body.appendChild(btn);
    }

    setTimeout(() => {
        if (!installPrompt) {
            console.log('No install prompt detected, showing manual button');
            showInstallButton();
        }
    }, 3000);
    </script>
</body>
</html>